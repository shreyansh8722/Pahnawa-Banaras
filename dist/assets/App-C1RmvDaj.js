import{c as L,r as s,j as a,u as N,a as k,b as A,A as P,O as E}from"./index-B8VDtRNT.js";import{A as S}from"./index-DvID8duW.js";import{m as f}from"./proxy-D6jU1156.js";import{H as C}from"./heart-4x4u9jQw.js";import{U as H}from"./user-tGXpPrQG.js";/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $=[["path",{d:"m16.24 7.76-1.804 5.411a2 2 0 0 1-1.265 1.265L7.76 16.24l1.804-5.411a2 2 0 0 1 1.265-1.265z",key:"9ktpf1"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],O=L("compass",$);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],z=L("house",U),R=void 0,G=s.createContext(null);function I({children:c}){const[w,r]=s.useState(null),[i,d]=s.useState(null),[v,l]=s.useState(!1),[h,u]=s.useState(null),m=async(t,o)=>{var e,n;try{const x=await fetch(`https://maps.googleapis.com/maps/api/geocode/json?latlng=${t},${o}&key=${R}`);if(!x.ok)throw new Error("Failed to fetch address");const g=await x.json();if(g.status!=="OK")throw console.error("Geocoding API Error:",g.error_message),new Error(g.error_message||"Could not get address");const y=g.results[0];if(!y)throw new Error("No address found for coordinates");const j=(e=y.address_components.find(p=>p.types.includes("locality")||p.types.includes("sublocality")))==null?void 0:e.long_name,_=(n=y.address_components.find(p=>p.types.includes("administrative_area_level_2")||p.types.includes("postal_town")))==null?void 0:n.long_name;d(j&&_?`${j}, ${_}`:_||j||"Unknown Location")}catch(x){console.error(x),u("Could not get address")}finally{l(!1)}},b=s.useCallback(()=>{if(l(!0),u(null),d(null),!navigator.geolocation){u("Geolocation is not supported by your browser"),l(!1);return}navigator.geolocation.getCurrentPosition(t=>{const{latitude:o,longitude:e}=t.coords;r({lat:o,lng:e}),m(o,e)},t=>{u(t.message),l(!1)})},[]);return a.jsx(G.Provider,{value:{location:w,address:i,loading:v,error:h,requestLocation:b},children:c})}function T(){const c=N(),w=k(),{user:r}=A()||{},[i,d]=s.useState(!1),[v,l]=s.useState(c.pathname);s.useEffect(()=>{let t=window.scrollY;const o=()=>{const e=window.scrollY,n=e>t&&e>80&&document.body.scrollHeight>window.innerHeight+100;d(n),t=e};return window.addEventListener("scroll",o,{passive:!0}),()=>window.removeEventListener("scroll",o)},[]);const h=c.pathname,m=["/","/explore","/favorites","/profile"].includes(h),b=t=>{l(t),w(t)};return a.jsx(P,{children:a.jsxs(I,{children:[a.jsx(S,{mode:"wait",children:a.jsx(f.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.18,ease:"easeOut"},className:`min-h-screen bg-[#0a0a0a] ${m?"pb-28":""}`,children:a.jsx(E,{})},c.pathname)}),m&&a.jsx(f.nav,{initial:{y:100,opacity:0,scale:.95,filter:"blur(6px)"},animate:{y:i?100:0,opacity:i?0:1,scale:i?.95:1,filter:i?"blur(6px)":"blur(0px)"},transition:{type:"spring",stiffness:160,damping:20,opacity:{duration:.25},scale:{duration:.3}},className:`fixed bottom-5 left-1/2 -translate-x-1/2 w-[90%] max-w-[370px]
            bg-white/5 backdrop-blur-2xl border border-white/10 text-white
            rounded-full flex justify-around items-center px-6 py-3 
            shadow-[0_8px_40px_rgba(0,0,0,0.6)] z-50`,children:[{icon:z,path:"/"},{icon:O,path:"/explore"},{icon:C,path:"/favorites"},{icon:H,path:"/profile"}].map(({icon:t,path:o})=>{const e=h===o,n=v===o;return a.jsx(f.button,{whileTap:{scale:.9},whileHover:{scale:1.1},onClick:()=>b(o),className:`relative flex items-center justify-center p-2 rounded-full transition-all duration-300 ${e?"text-white scale-105 after:content-[''] after:absolute after:bottom-[2px] after:left-1/2 after:-translate-x-1/2 after:w-1.5 after:h-1.5 after:rounded-full after:bg-blue-400":"text-white/70 hover:text-white"}`,children:o==="/profile"&&(r!=null&&r.photoURL)?a.jsx(f.img,{src:r.photoURL,alt:"Profile",className:`w-6 h-6 rounded-full object-cover transition-all ${e?"ring-2 ring-blue-400 ring-offset-2 ring-offset-[#0a0a0a]":""}`,animate:n?{boxShadow:["0 0 0px rgba(59,130,246,0)","0 0 12px rgba(59,130,246,0.9)","0 0 0px rgba(59,130,246,0)"]}:{},transition:{duration:.6,ease:"easeOut"}},r.photoURL):a.jsx(f.div,{animate:n?{scale:[1,1.2,1],color:["#fff","rgb(96,165,250)","#fff"],textShadow:["0 0 0px rgba(59,130,246,0)","0 0 12px rgba(59,130,246,0.9)","0 0 0px rgba(59,130,246,0)"]}:{},transition:{duration:.6,ease:"easeOut"},children:a.jsx(t,{size:23,strokeWidth:e?2.3:1.8,className:""})})},o)})},"bottom-nav")]})})}export{T as default};
